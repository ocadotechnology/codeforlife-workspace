// TODO: write comment
{
  "__all__": {
    "description": "Configurations that apply to all devcontainers.",
    "paths": [
      "codeforlife-deploy-appengine/.devcontainer.json",
      "codeforlife-package-javascript/.devcontainer.json",
      "codeforlife-package-python/.devcontainer.json",
      "codeforlife-portal/.devcontainer.json",
      "codeforlife-portal-react/.devcontainer.json",
      "codeforlife-service-template/.devcontainer.json",
      "codeforlife-sso/.devcontainer.json",
      "rapid-router/.devcontainer.json"
    ],
    "devcontainer": {
      "dockerComposeFile": [
        "../docker-compose.yml"
      ],
      "service": "base-service",
      "shutdownAction": "none",
      "remoteUser": "root",
      "customizations": {
        "vscode": {
          "settings": {
            "editor.tabSize": 2,
            "editor.rulers": [
              80
            ],
            "editor.formatOnSave": true,
            "editor.codeActionsOnSave": {
              "source.organizeImports": "explicit"
            },
            "[md]": {
              "editor.tabSize": 4
            },
            "workbench.colorCustomizations": {
              "editorRuler.foreground": "#008000"
            },
            "cSpell.words": [
              "codeforlife",
              "klass",
              "ocado",
              "kurono",
              "pipenv"
            ]
          },
          "extensions": [
            "github.vscode-pull-request-github",
            "redhat.vscode-yaml",
            "davidanson.vscode-markdownlint",
            "bierner.markdown-mermaid",
            "streetsidesoftware.code-spell-checker"
          ]
        }
      }
    }
  },
  "env.python": {
    "needs": [
      "__all__"
    ],
    "description": "Devcontainers with python environments.",
    "paths": [
      "codeforlife-deploy-appengine/.devcontainer.json",
      "codeforlife-package-python/.devcontainer.json",
      "codeforlife-portal/.devcontainer.json",
      "codeforlife-portal-react/.devcontainer.json",
      "codeforlife-service-template/.devcontainer.json",
      "codeforlife-sso/.devcontainer.json",
      "rapid-router/.devcontainer.json"
    ],
    "devcontainer": {
      "features": {
        "ghcr.io/devcontainers/features/python:1": {
          "version": "3.8",
          "installTools": false
        },
        "ghcr.io/devcontainers-contrib/features/pipenv:2": {
          "version": "2023.11.15"
        },
        "ghcr.io/devcontainers/features/node:1": {
          "version": "18"
        }
      },
      "customizations": {
        "vscode": {
          "settings": {
            "python.defaultInterpreterPath": "backend/.venv/bin/python",
            "[python]": {
              "editor.tabSize": 4,
              "editor.defaultFormatter": "ms-python.black-formatter"
            },
            "files.exclude": {
              "**/__pycache__": true,
              "**/.pytest_cache": true,
              "**/.mypy_cache": true,
              "**/.hypothesis": true
            },
            "autoDocstring.customTemplatePath": ".vscode/extensions/autoDocstring/docstring.mustache"
          },
          "extensions": [
            "ms-python.python",
            "ms-python.pylint",
            "ms-python.isort",
            "ms-python.vscode-pylance",
            "ms-python.mypy-type-checker",
            "ms-python.black-formatter",
            "kevinrose.vsc-python-indent"
          ]
        }
      }
    }
  },
  "service": {
    "needs": [
      "__all__",
      "env.python"
    ],
    "description": "Configurations that apply to devcontainers for services.",
    "paths": [
      "codeforlife-portal-react/.devcontainer.json",
      "codeforlife-sso/.devcontainer.json"
    ],
    "devcontainer": {
      "postCreateCommand": "./setup",
      "mounts": [
        "source=./codeforlife-package-python,target=/workspace/codeforlife-package-python,type=bind,consistency=cached"
      ],
      "customizations": {
        "vscode": {
          "settings": {
            "python.analysis.extraPaths": [
              "../codeforlife-package-python"
            ]
          }
        }
      }
    }
  }
}